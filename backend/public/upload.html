<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Brightnal's Upload</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:"Nata sans",sans-serif}
body{background:#f8f8f8;min-height:100vh;padding:2em}
.container{max-width:900px;margin:0 auto;background:#fff;border-radius:15px;box-shadow:0 5px 15px rgba(0,0,0,.08);overflow:hidden}
.header{background:#0f1419;color:#fff;padding:2em;text-align:center}
.header h1{font-size:2em;margin-bottom:.5em}
.header p{opacity:.9;font-size:.95em}
.upload-zone{padding:3em 2em;border-bottom:1px solid #e5e5e5}
.drop-area{border:3px dashed #e5e5e5;border-radius:15px;padding:3em 2em;text-align:center;cursor:pointer;transition:all .3s;background:#f9f9f9}
.drop-area:hover,.drop-area.drag{border-color:#0f1419;background:#fff}
.drop-icon{font-size:3em;margin-bottom:.5em}
.drop-area h3{color:#111;margin-bottom:.5em}
.drop-area p{color:#666;font-size:.9em;margin-bottom:1em}
.file-input{display:none}
.btn{background:#0f1419;color:#fff;border:none;padding:.8em 2em;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s;font-size:.95em}
.btn:hover{background:#000;transform:translateY(-2px)}
.btn:disabled{opacity:.5;cursor:not-allowed;transform:none}
.btn-sec{background:#6c757d}
.preview{display:none;padding:2em;background:#f8f8f8}
.preview.show{display:block}
.img-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:1em;margin-bottom:2em}
.img-item{position:relative;border-radius:10px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.1)}
.img-item img{width:100%;height:150px;object-fit:cover}
.img-remove{position:absolute;top:.5em;right:.5em;background:#f44336;color:#fff;border:none;width:25px;height:25px;border-radius:50%;cursor:pointer;font-size:.8em}
.form-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:1em;margin-bottom:2em}
.form-group{display:flex;flex-direction:column;gap:.5em}
.form-group label{font-weight:600;color:#111;font-size:.9em}
.form-group input,.form-group select{padding:.8em;border:1px solid #e5e5e5;border-radius:8px;font-size:.9em}
.form-group input:focus,.form-group select:focus{outline:none;border-color:#0f1419}
.actions{display:flex;gap:1em}
.actions button{flex:1}
.progress{display:none;padding:0 2em 2em}
.progress.show{display:block}
.bar-bg{background:#e5e5e5;height:8px;border-radius:10px;overflow:hidden;margin-bottom:1em}
.bar{background:#0f1419;height:100%;width:0;transition:width .3s;border-radius:10px}
.progress-txt{text-align:center;color:#666;font-weight:600;font-size:.9em}
.result{display:none;padding:0 2em 2em}
.result.show{display:block}
.msg{padding:1em;border-radius:8px;text-align:center;font-weight:600}
.msg.success{background:#d4edda;color:#155724;border:2px solid #c3e6cb}
.msg.error{background:#f8d7da;color:#721c24;border:2px solid #f5c6cb}
.url-box{background:#f8f8f8;padding:1em;border-radius:8px;margin-top:1em;word-break:break-all;font-family:monospace;font-size:.85em;color:#0f1419;border:1px solid #e5e5e5}
@media(max-width:768px){
.form-grid{grid-template-columns:1fr}
.img-grid{grid-template-columns:repeat(auto-fill,minmax(120px,1fr))}
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>üì∏ BRIGHTNAL'S CONCEPTS</h1>
<p>Upload Product Images</p>
</div>

<form id="uploadForm" enctype="multipart/form-data">
<div class="upload-zone">
<div class="drop-area" id="dropArea">
<div class="drop-icon">‚òÅÔ∏è</div>
<h3>Drop images here</h3>
<p>or click to browse</p>
<input type="file" id="fileInput" class="file-input" name="files" accept="image/*" multiple/>
<button type="button" class="btn" onclick="document.getElementById('fileInput').click()">Select Images</button>
</div>
</div>

<div class="preview" id="preview">
<div class="img-grid" id="imgGrid"></div>
<div class="form-grid">
<div class="form-group">
<label>Size (Optional)</label>
<select id="size">
<option value="">Select size</option>
<option>XS</option>
<option>S</option>
<option>M</option>
<option>L</option>
<option>XL</option>
<option>XXL</option>
</select>
</div>
<div class="form-group">
<label>Gender (Optional)</label>
<select id="gender">
<option value="">Select gender</option>
<option>Unisex</option>
<option>Men</option>
<option>Women</option>
<option>Kids</option>
</select>
</div>
<div class="form-group">
<label>Category (Optional)</label>
<input type="text" id="category" placeholder="e.g., T-Shirt, Jeans"/>
</div>
<div class="form-group">
<label>Price (Optional)</label>
<input type="number" id="price" placeholder="0.00" step="0.01"/>
</div>
</div>
<div class="actions">
<button type="button" class="btn btn-sec" id="cancelBtn">Cancel</button>
<button type="submit" class="btn" id="uploadBtn">Upload All</button>
</div>
</div>

<div class="progress" id="progress">
<div class="bar-bg"><div class="bar" id="bar"></div></div>
<div class="progress-txt" id="progressTxt">Uploading... 0%</div>
</div>

<div class="result" id="result"></div>
</form>
</div>

<script>
const dropArea=document.getElementById('dropArea');
const fileInput=document.getElementById('fileInput');
const preview=document.getElementById('preview');
const imgGrid=document.getElementById('imgGrid');
const progress=document.getElementById('progress');
const bar=document.getElementById('bar');
const progressTxt=document.getElementById('progressTxt');
const result=document.getElementById('result');
const cancelBtn=document.getElementById('cancelBtn');
const uploadBtn=document.getElementById('uploadBtn');

let files=[];

dropArea.onclick=()=>fileInput.click();

dropArea.ondragover=(e)=>{e.preventDefault();dropArea.classList.add('drag')};
dropArea.ondragleave=()=>dropArea.classList.remove('drag');
dropArea.ondrop=(e)=>{
e.preventDefault();
dropArea.classList.remove('drag');
if(e.dataTransfer.files.length){
fileInput.files=e.dataTransfer.files;
handleFiles(e.dataTransfer.files);
}
};

fileInput.onchange=(e)=>handleFiles(e.target.files);

function handleFiles(newFiles){
files=Array.from(newFiles);
imgGrid.innerHTML='';
files.forEach((f,i)=>{
const reader=new FileReader();
reader.onload=(e)=>{
const div=document.createElement('div');
div.className='img-item';
div.innerHTML=`<img src="${e.target.result}"/><button class="img-remove" onclick="removeFile(${i})">√ó</button>`;
imgGrid.appendChild(div);
};
reader.readAsDataURL(f);
});
preview.classList.add('show');
result.classList.remove('show');
}

function removeFile(i){
files.splice(i,1);
if(files.length===0){
preview.classList.remove('show');
fileInput.value='';
}else{
handleFiles(files);
}
}

cancelBtn.onclick=()=>{
fileInput.value='';
files=[];
preview.classList.remove('show');
progress.classList.remove('show');
result.classList.remove('show');
uploadBtn.disabled=false;
};

document.getElementById('uploadForm').onsubmit=async(e)=>{
e.preventDefault();
if(!files.length)return;

const formData=new FormData();
files.forEach(f=>formData.append('files',f));

const size=document.getElementById('size').value;
const gender=document.getElementById('gender').value;
const category=document.getElementById('category').value;
const price=document.getElementById('price').value;

if(size)formData.append('size',size);
if(gender)formData.append('gender',gender);
if(category)formData.append('category',category);
if(price)formData.append('price',price);

progress.classList.add('show');
result.classList.remove('show');
uploadBtn.disabled=true;

let p=0;
const interval=setInterval(()=>{
p+=Math.random()*15;
if(p>90)p=90;
bar.style.width=p+'%';
progressTxt.textContent=`Uploading... ${Math.round(p)}%`;
},200);

try{
const res=await fetch('/upload',{method:'POST',body:formData});
clearInterval(interval);
bar.style.width='100%';
progressTxt.textContent='Complete! 100%';

const data=await res.json();
setTimeout(()=>{
result.classList.add('show');
if(data.success){
result.innerHTML=`<div class="msg success">‚úÖ Uploaded successfully!<div class="url-box">${data.url||'Multiple files uploaded'}</div></div>`;
}else{
result.innerHTML=`<div class="msg error">‚ùå Error: ${data.message}</div>`;
}
uploadBtn.disabled=false;
},500);
}catch(err){
clearInterval(interval);
result.classList.add('show');
result.innerHTML=`<div class="msg error">‚ùå Upload failed: ${err.message}</div>`;
uploadBtn.disabled=false;
}
};
</script>
</body>
</html>